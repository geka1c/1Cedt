<ПравилаРегистрации>
	<ВерсияФормата>2.01</ВерсияФормата>
	<Ид>4d754baa-8c49-11e6-ad79-28e34720f287</Ид>
	<Наименование>СовместныеПокупки 3.2.6: Синхронизация данных через универсальный формат</Наименование>
	<ДатаВремяСоздания>2016-10-17T15:39:52</ДатаВремяСоздания>
	<ПланОбмена Имя="спСинхронизацияДанныхЧерезУниверсальныйФормат">ПланОбменаСсылка.спСинхронизацияДанныхЧерезУниверсальныйФормат</ПланОбмена>
	<Конфигурация ВерсияПлатформы="8.2" ВерсияКонфигурации="3.2.6.77" СинонимКонфигурации="Совместные покупки">СовместныеПокупки</Конфигурация>
	<СоставПланаОбмена>
		<Элемент>
			<Тип>СправочникСсылка.Коробки</Тип>
			<Авторегистрация>false</Авторегистрация>
		</Элемент>
		<Элемент>
			<Тип>ДокументСсылка.ЗаявкаВТранспортнуюКомпанию</Тип>
			<Авторегистрация>false</Авторегистрация>
		</Элемент>
		<Элемент>
			<Тип>ДокументСсылка.СчетКонтрагента</Тип>
			<Авторегистрация>false</Авторегистрация>
		</Элемент>
		<Элемент>
			<Тип>СправочникСсылка.Контрагенты</Тип>
			<Авторегистрация>false</Авторегистрация>
		</Элемент>
		<Элемент>
			<Тип>СправочникСсылка.ТочкиРаздачи</Тип>
			<Авторегистрация>false</Авторегистрация>
		</Элемент>
	</СоставПланаОбмена>
	<ПравилаРегистрацииОбъектов>
		<Группа Отключить="false">
			<Код>000000002</Код>
			<Наименование>Документы</Наименование>
			<ТипГруппы>Документ</ТипГруппы>
			<Правило Отключить="false" Валидное="true">
				<Код>000000003</Код>
				<Наименование>Счет контрагента</Наименование>
				<ОбъектНастройки>ДокументСсылка.СчетКонтрагента</ОбъектНастройки>
				<ОбъектМетаданныхИмя>Документ.СчетКонтрагента</ОбъектМетаданныхИмя>
				<ОбъектМетаданныхТип>Документ</ОбъектМетаданныхТип>
				<ОтборПоСвойствамПланаОбмена>
					<Группа>
						<БулевоЗначениеГруппы>ИЛИ</БулевоЗначениеГруппы>
						<ЭлементОтбора>
							<ЭтоСтрокаКонстанты>true</ЭтоСтрокаКонстанты>
							<ТипСвойстваОбъекта>Булево</ТипСвойстваОбъекта>
							<СвойствоПланаОбмена>ИспользоватьОтборПоТочкеНазначения</СвойствоПланаОбмена>
							<ВидСравнения>Равно</ВидСравнения>
							<СвойствоОбъекта>false</СвойствоОбъекта>
							<ТаблицаСвойствПланаОбмена>
								<Свойство>
									<Наименование>ИспользоватьОтборПоТочкеНазначения</Наименование>
									<Тип>Булево</Тип>
									<Вид>Реквизит</Вид>
								</Свойство>
							</ТаблицаСвойствПланаОбмена>
						</ЭлементОтбора>
						<ЭлементОтбора>
							<ЭтоСтрокаКонстанты>false</ЭтоСтрокаКонстанты>
							<ТипСвойстваОбъекта>СправочникСсылка.ТочкиРаздачи</ТипСвойстваОбъекта>
							<СвойствоПланаОбмена>[ТочкиНазначения].ТочкаРаздачи</СвойствоПланаОбмена>
							<ВидСравнения>Равно</ВидСравнения>
							<СвойствоОбъекта>ТранзитнаяТочка</СвойствоОбъекта>
							<ТаблицаСвойствОбъекта>
								<Свойство>
									<Наименование>ТранзитнаяТочка</Наименование>
									<Тип>СправочникСсылка.ТочкиРаздачи</Тип>
									<Вид>Реквизит</Вид>
								</Свойство>
							</ТаблицаСвойствОбъекта>
							<ТаблицаСвойствПланаОбмена>
								<Свойство>
									<Наименование>[ТочкиНазначения]</Наименование>
									<Вид>ТабличнаяЧасть</Вид>
								</Свойство>
								<Свойство>
									<Наименование>ТочкаРаздачи</Наименование>
									<Тип>СправочникСсылка.ТочкиРаздачи</Тип>
									<Вид>Реквизит</Вид>
								</Свойство>
							</ТаблицаСвойствПланаОбмена>
						</ЭлементОтбора>
					</Группа>
				</ОтборПоСвойствамПланаОбмена>
				<ОтборПоСвойствамОбъекта>
					<ЭлементОтбора>
						<ТипСвойстваОбъекта>ПеречислениеСсылка.ВидыОперацийСчетКонтрагента</ТипСвойстваОбъекта>
						<ВидСравнения>Равно</ВидСравнения>
						<СвойствоОбъекта>ВидОперации</СвойствоОбъекта>
						<Вид>АлгоритмЗначения</Вид>
						<ЗначениеКонстанты>Значение =Перечисления.ВидыОперацийСчетКонтрагента.СТранспортнойКомпанией ;</ЗначениеКонстанты>
						<ТаблицаСвойствОбъекта>
							<Свойство>
								<Наименование>ВидОперации</Наименование>
								<Тип>ПеречислениеСсылка.ВидыОперацийСчетКонтрагента</Тип>
								<Вид>Реквизит</Вид>
							</Свойство>
						</ТаблицаСвойствОбъекта>
					</ЭлементОтбора>
				</ОтборПоСвойствамОбъекта>
				<ПослеОбработки>Если Получатели.Количество()&gt;0 и не Выгрузка Тогда
	
	ВыполнитьПравилаРегистрацииДляОбъекта(Объект.Контрагент.ПолучитьОбъект(), ПРО.ИмяПланаОбмена, Неопределено);
	Если Объект.ТранзитнаяТочка&lt;&gt;Справочники.ТочкиРаздачи.ПустаяСсылка() Тогда
		ВыполнитьПравилаРегистрацииДляОбъекта(Объект.ТранзитнаяТочка.ПолучитьОбъект(), ПРО.ИмяПланаОбмена, Неопределено);
	КонецЕсли;
	Для каждого элемЗаказ из  Объект.Заказы Цикл
		Если элемЗаказ.Груз&lt;&gt;Справочники.Коробки.ПустаяСсылка() Тогда
			ВыполнитьПравилаРегистрацииДляОбъекта(элемЗаказ.Груз.ПолучитьОбъект(), ПРО.ИмяПланаОбмена, Неопределено);
			Если элемЗаказ.Груз.Организатор&lt;&gt;Справочники.Организаторы.ПустаяСсылка() Тогда
				ВыполнитьПравилаРегистрацииДляОбъекта(элемЗаказ.Груз.Организатор.ПолучитьОбъект(), ПРО.ИмяПланаОбмена, Неопределено);
				Если элемЗаказ.Груз.Организатор.Участник&lt;&gt;Справочники.Участники.ПустаяСсылка() Тогда
					ВыполнитьПравилаРегистрацииДляОбъекта(элемЗаказ.Груз.Организатор.Участник.ПолучитьОбъект(), ПРО.ИмяПланаОбмена, Неопределено);	
				КонецЕсли;	
			КонецЕсли;	
			Если элемЗаказ.Груз.ТочкаНазначения&lt;&gt;Справочники.ТочкиРаздачи.ПустаяСсылка() Тогда
				ВыполнитьПравилаРегистрацииДляОбъекта(элемЗаказ.Груз.ТочкаНазначения.ПолучитьОбъект(), ПРО.ИмяПланаОбмена, Неопределено);	
			КонецЕсли;	
		КонецЕсли;	
		Если элемЗаказ.Заявка&lt;&gt;Документы.ЗаявкаВТранспортнуюКомпанию.ПустаяСсылка() Тогда
			ВыполнитьПравилаРегистрацииДляОбъекта(элемЗаказ.Заявка.ПолучитьОбъект(), ПРО.ИмяПланаОбмена, Неопределено);
		КонецЕсли;
	КонецЦикла;
	Для каждого элемЗаказ из  Объект.ЗаявкиВТК Цикл
		Если элемЗаказ.Заявка&lt;&gt;Документы.ЗаявкаВТранспортнуюКомпанию.ПустаяСсылка() Тогда
			ВыполнитьПравилаРегистрацииДляОбъекта(элемЗаказ.Заявка.ПолучитьОбъект(), ПРО.ИмяПланаОбмена, Неопределено);
		КонецЕсли;
	КонецЦикла;
	Для каждого элемЗаказ из  Объект.Организаторы Цикл
		Если элемЗаказ.Организатор&lt;&gt;Справочники.Участники.ПустаяСсылка() Тогда
			ВыполнитьПравилаРегистрацииДляОбъекта(элемЗаказ.Организатор.ПолучитьОбъект(), ПРО.ИмяПланаОбмена, Неопределено);
		КонецЕсли;
	КонецЦикла;

КонецЕсли;</ПослеОбработки>
			</Правило>
			<Правило Отключить="true" Валидное="true">
				<Код>000000001</Код>
				<Наименование>Заявка в транспортную компанию</Наименование>
				<ОбъектНастройки>ДокументСсылка.ЗаявкаВТранспортнуюКомпанию</ОбъектНастройки>
				<ОбъектМетаданныхИмя>Документ.ЗаявкаВТранспортнуюКомпанию</ОбъектМетаданныхИмя>
				<ОбъектМетаданныхТип>Документ</ОбъектМетаданныхТип>
				<ОтборПоСвойствамПланаОбмена>
					<Группа>
						<БулевоЗначениеГруппы>ИЛИ</БулевоЗначениеГруппы>
						<ЭлементОтбора>
							<ЭтоСтрокаКонстанты>false</ЭтоСтрокаКонстанты>
							<ТипСвойстваОбъекта>СправочникСсылка.ТочкиРаздачи</ТипСвойстваОбъекта>
							<СвойствоПланаОбмена>[ТочкиНазначения].ТочкаРаздачи</СвойствоПланаОбмена>
							<ВидСравнения>Равно</ВидСравнения>
							<СвойствоОбъекта>ТочкаТранзита</СвойствоОбъекта>
							<ТаблицаСвойствОбъекта>
								<Свойство>
									<Наименование>ТочкаТранзита</Наименование>
									<Тип>СправочникСсылка.ТочкиРаздачи</Тип>
									<Вид>Реквизит</Вид>
								</Свойство>
							</ТаблицаСвойствОбъекта>
							<ТаблицаСвойствПланаОбмена>
								<Свойство>
									<Наименование>[ТочкиНазначения]</Наименование>
									<Вид>ТабличнаяЧасть</Вид>
								</Свойство>
								<Свойство>
									<Наименование>ТочкаРаздачи</Наименование>
									<Тип>СправочникСсылка.ТочкиРаздачи</Тип>
									<Вид>Реквизит</Вид>
								</Свойство>
							</ТаблицаСвойствПланаОбмена>
						</ЭлементОтбора>
						<ЭлементОтбора>
							<ЭтоСтрокаКонстанты>true</ЭтоСтрокаКонстанты>
							<ТипСвойстваОбъекта>Булево</ТипСвойстваОбъекта>
							<СвойствоПланаОбмена>ИспользоватьОтборПоТочкеНазначения</СвойствоПланаОбмена>
							<ВидСравнения>Равно</ВидСравнения>
							<СвойствоОбъекта>false</СвойствоОбъекта>
							<ТаблицаСвойствПланаОбмена>
								<Свойство>
									<Наименование>ИспользоватьОтборПоТочкеНазначения</Наименование>
									<Тип>Булево</Тип>
									<Вид>Реквизит</Вид>
								</Свойство>
							</ТаблицаСвойствПланаОбмена>
						</ЭлементОтбора>
					</Группа>
				</ОтборПоСвойствамПланаОбмена>
				<ОтборПоСвойствамОбъекта>
					<ЭлементОтбора>
						<ТипСвойстваОбъекта>Строка</ТипСвойстваОбъекта>
						<ВидСравнения>НеРавно</ВидСравнения>
						<СвойствоОбъекта>НомерЗаявки</СвойствоОбъекта>
						<Вид>АлгоритмЗначения</Вид>
						<ЗначениеКонстанты>Значение ="" ;</ЗначениеКонстанты>
						<ТаблицаСвойствОбъекта>
							<Свойство>
								<Наименование>НомерЗаявки</Наименование>
								<Тип>Строка</Тип>
								<Вид>Реквизит</Вид>
							</Свойство>
						</ТаблицаСвойствОбъекта>
					</ЭлементОтбора>
				</ОтборПоСвойствамОбъекта>
				<ПослеОбработки>Если Получатели.Количество()&gt;0 и не Выгрузка Тогда
	ВыполнитьПравилаРегистрацииДляОбъекта(Объект.ТранспортнаяКомпания.ПолучитьОбъект(), ПРО.ИмяПланаОбмена, Неопределено);
	ВыполнитьПравилаРегистрацииДляОбъекта(Объект.ТочкаТранзита.ПолучитьОбъект(), ПРО.ИмяПланаОбмена, Неопределено);
	Для каждого элемЗаказ из  Объект.Заказы Цикл
		ВыполнитьПравилаРегистрацииДляОбъекта(элемЗаказ.Груз.ПолучитьОбъект(), ПРО.ИмяПланаОбмена, Неопределено);
	КонецЦикла;
КонецЕсли;</ПослеОбработки>
			</Правило>
		</Группа>
	</ПравилаРегистрацииОбъектов>
</ПравилаРегистрации>